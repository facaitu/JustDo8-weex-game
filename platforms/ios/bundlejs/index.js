// { "framework": "Vue"} 

!function(t){function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=6)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(5),n=function(t){return t&&t.__esModule?t:{default:t}}(o),s=(weex.requireModule("modal"),weex.requireModule("animation"));e.default={components:{stoneMap:n.default},data:{stoneMapShow:!1,infoShow:!1,actionStart:0,actionTo:0,actionSize:0,finalScore:0,highScore:0,allAction:["click","up","down","left","right"]},mounted:function(){var t=this;setTimeout(function(){s.transition(t.$refs.rLogo,{styles:{transform:"translateY(200px) scale(1.4)",opacity:1},duration:800,timingFunction:"ease-out",delay:0},function(){s.transition(t.$refs.rBtnStart,{styles:{opacity:1},duration:2e3,timingFunction:"ease",delay:0})})},1e3)},methods:{gameStart:function(){var t=this;s.transition(this.$refs.rBtnStart,{styles:{opacity:0},duration:1e3,timingFunction:"linear",delay:0}),s.transition(this.$refs.rLogo,{styles:{transform:"translate(-190px,-170px)",opacity:1},duration:1e3,timingFunction:"ease-out",delay:0},function(){t.stoneMapShow=!0})},gameRestart:function(){this.finalScore=this.highScore=0,this.stoneMapShow=!0,this.infoShow=!1,this.ScreenLock=!1},onGameover:function(t,e){this.finalScore=t,this.highScore=t>e?0:e,this.stoneMapShow=!1,this.infoShow=!0,this.ScreenLock=!0},onClick:function(t){this.actiontp="click",this.actionLaunch("click")},onSwipe:function(t){this.actiontp="swipe:"+t.direction,this.actionLaunch(t.direction)},onPanstart:function(t){this.actionStart=t.changedTouches[0].screenX},onPanend:function(t){this.actionTo=this.actionStart=this.actionSize=0},onHorizontalpan:function(t){0!=this.actionStart&&(this.actionTo=t.changedTouches[0].screenX,this.actionSize=this.actionTo-this.actionStart,this.actionSize>=40?(this.actionStart=this.actionTo,this.actionLaunch("right")):this.actionSize<=-40&&(this.actionStart=this.actionTo,this.actionLaunch("left")))},onScreenLock:function(t){this.ScreenLock=!0},onScreenUnlock:function(t){this.ScreenLock=!1},actionLaunch:function(t){!this.ScreenLock&&-1!=this.allAction.indexOf(t)&&this.$refs.rStoneMap&&this.$refs.rStoneMap.action(t)}}}},function(t,e){t.exports={}},function(t,e){t.exports={wrapper:{backgroundImage:"linear-gradient(to top,#000,#333)",paddingTop:20,display:"flex",flexWrap:"nowrap",flexDirection:"column"},"i-banner":{position:"absolute",top:200,left:175,width:400,height:100,opacity:0},"btn-start":{position:"absolute",color:"#3cd917",fontSize:50,width:300,height:80,left:225,bottom:300,textAlign:"center",lineHeight:80,borderWidth:1,borderColor:"#3cd917",borderRadius:8,backgroundColor:"rgba(0,0,0,0.8)",boxShadow:"0 0 10px #fff",opacity:0},"stone-map":{position:"relative",flex:1},"u-info":{position:"absolute",top:200,height:800,width:750},"info-tlt":{fontSize:70,color:"#ffffff",textAlign:"center"},"info-score":{fontSize:100,marginTop:130,marginBottom:130,color:"#3cd917",textAlign:"center"},"info-high-s":{fontSize:40,marginBottom:30,color:"#fbf00c",textAlign:"center"},"btn-restart":{position:"relative",color:"#3cd917",fontSize:50,width:300,height:80,top:100,left:400,textAlign:"center",lineHeight:80,borderWidth:1,borderColor:"#3cd917",borderRadius:8}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:["wrapper"],on:{swipe:t.onSwipe,click:t.onClick,panstart:t.onPanstart,panend:t.onPanend,horizontalpan:t.onHorizontalpan}},[i("image",{ref:"rLogo",staticClass:["i-banner"],attrs:{resize:"contain",src:"http://doc.zwwill.com/justdo8/img/banner.png"}}),i("text",{ref:"rBtnStart",staticClass:["btn-start"],on:{click:t.gameStart}},[t._v("START")]),t.stoneMapShow?i("stoneMap",{ref:"rStoneMap",staticClass:["stone-map"],on:{screenLock:t.onScreenLock,screenUnlock:t.onScreenUnlock,over:t.onGameover}}):t._e(),t.infoShow?i("div",{staticClass:["u-info"]},[i("text",{staticClass:["info-tlt"]},[t._v(t._s(t.highScore?"FINAL SCORE":"RECORD BREAKING"))]),i("text",{staticClass:["info-score"]},[t._v(t._s(t.finalScore))]),t.highScore?i("text",{staticClass:["info-high-s"]},[t._v("HIGH SCORE: "+t._s(t.highScore))]):t._e(),i("text",{staticClass:["btn-restart"],on:{click:t.gameRestart}},[t._v("RESTART")])]):t._e()],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e,i){var o,n,s=[];s.push(i(9)),o=i(7);var r=i(11);n=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(Object.keys(o).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n=o=o.default),"function"==typeof n&&(n=n.options),n.__file="/Users/zwwill/workspace/dev/github/justdo8-weex/assets/components/stone.vue",n.render=r.render,n.staticRenderFns=r.staticRenderFns,n._scopeId="data-v-57d5c2b4",n.style=n.style||{},s.forEach(function(t){for(var e in t)n.style[e]=t[e]}),"function"==typeof __register_static_styles__&&__register_static_styles__(n._scopeId,s),t.exports=o},function(t,e,i){var o,n,s=[];s.push(i(10)),o=i(8);var r=i(12);n=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(Object.keys(o).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n=o=o.default),"function"==typeof n&&(n=n.options),n.__file="/Users/zwwill/workspace/dev/github/justdo8-weex/assets/components/stoneMap.vue",n.render=r.render,n.staticRenderFns=r.staticRenderFns,n._scopeId="data-v-ed3159f4",n.style=n.style||{},s.forEach(function(t){for(var e in t)n.style[e]=t[e]}),"function"==typeof __register_static_styles__&&__register_static_styles__(n._scopeId,s),t.exports=o},function(t,e,i){var o,n,s=[];s.push(i(1)),s.push(i(2)),o=i(0);var r=i(3);n=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(Object.keys(o).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n=o=o.default),"function"==typeof n&&(n=n.options),n.__file="/Users/zwwill/workspace/dev/github/justdo8-weex/src/index.vue",n.render=r.render,n.staticRenderFns=r.staticRenderFns,n._scopeId="data-v-989a1d56",n.style=n.style||{},s.forEach(function(t){for(var e in t)n.style[e]=t[e]}),"function"==typeof __register_static_styles__&&__register_static_styles__(n._scopeId,s),t.exports=o,t.exports.el="true",new Vue(t.exports)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=weex.requireModule("animation");weex.requireModule("modal");e.default={props:["id","p0","num0"],data:function(){return{show:!0,p:"0,8",visibility:"",num:-1,colors:["#333","#666","#eee","#b9e3ee","#ebe94b","#46cafb","#eca48f","#decb3d","#8d1894"],backgroundColors:["#222","#ddd","#999","#379dc3","#36be0d","#001cc6","#da4324","#56125a","#ffffff"]}},computed:{color:function(){return this.colors[this.num]},score:function(){return this.num<0&&(this.num=this.num0||1),this.num<9&&this.num>0?this.num:0},backgroundColor0:function(){return this.backgroundColors[this.num]}},watch:{p:function(t){var e=125*t.charAt(0)+"px",i=125*t.charAt(2)+"px";o.transition(this.$refs.stone,{styles:{transform:"translate("+e+",-"+i+")"},duration:200,timingFunction:"ease-in",delay:0})}},mounted:function(){this.initState(this.p0)},methods:{move:function(t,e){this.p=t+","+e},scoreChange:function(t){var e=this;t>0?this.num=t:o.transition(this.$refs.stone,{styles:{transform:"translate(625,-1000) scale(0)"},duration:700,timingFunction:"ease-in",delay:0},function(){e.show=!1,e.$parent.scorePlus(Math.pow(4,parseInt(e.num))),e.num=0})},initState:function(t){var e=this;t=t.split(",");var i=125*t[0]+"px",n=125*t[1]+"px";this.num=this.num0,o.transition(this.$refs.stone,{styles:{transform:"translate("+i+",-"+n+")"},duration:10,delay:0},function(){e.visibility="visible"}),this.p=this.p0}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=i(4),s=function(t){return t&&t.__esModule?t:{default:t}}(n),r=weex.requireModule("storage"),a=weex.requireModule("animation"),c=weex.requireModule("modal");e.default={components:{stone:s.default},data:function(){return{totalScore:0,highScore:0,stones:[],map:[["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""]],sliderIndex:1,actionLock:!0,sounds:{change:"http://doc.zwwill.com/justdo8/res/change.wav"}}},mounted:function(){var t=this;this.pushStones(),r.getItem("H-SCORE",function(e){e&&e.data&&"undefined"!=e.data?t.highScore=parseInt(e.data):t.highScore=0})},methods:{action:function(t){var e=this;if(!this.actionLock)switch(t){case"click":case"up":this.actionChange(),this.actionLock=!0,setTimeout(function(){e.actionLock=!1},200);break;case"left":case"right":this.actionSliderMove(t),this.actionLock=!0,setTimeout(function(){e.actionLock=!1},200);break;case"down":this.actionDown(),this.actionLock=!0;break;default:c.toast({message:"unknown action",duration:.1})}},pushStones:function(){var t,e=[],i=void 0;this.sliderIndex=Math.floor(4*Math.random());for(var o=0;o<3;o++)i="s"+(Math.floor(1e6*Math.random())+Date.now()),e.push({id:i,p0:this.sliderIndex+o+",7",s:Math.floor(1.5*Math.random())+1}),this.map[0][this.sliderIndex+o]=i;(t=this.stones).push.apply(t,e),this.actionLock=!1},actionChange:function(){var t=this.map[0][this.sliderIndex],e=this.map[0][this.sliderIndex+1],i=this.map[0][this.sliderIndex+2];this.sChange(t,{x:2}),this.map[0][this.sliderIndex+2]=t,this.sChange(e,{x:-1}),this.map[0][this.sliderIndex]=e,this.sChange(i,{x:-1}),this.map[0][this.sliderIndex+1]=i},actionSliderMove:function(t){if(!(this.sliderIndex<=0&&"left"==t||this.sliderIndex>=3&&"right"==t)){var e=this.map[0][this.sliderIndex],i=this.map[0][this.sliderIndex+1],o=this.map[0][this.sliderIndex+2],n="left"==t?-1:1;this.sChange(e,{x:n}),this.map[0][this.sliderIndex+n]=e,this.sChange(i,{x:n}),this.map[0][this.sliderIndex+n+1]=i,this.sChange(o,{x:n}),this.map[0][this.sliderIndex+n+2]=o,this.map[0][this.sliderIndex+1+-1*n]="",this.sliderIndex+=n}},actionDown:function(){this.$emit("screenLock");for(var t=void 0,e=void 0,i=void 0,o=[],n=0;n<3;n++){i="",t=this.map[0][this.sliderIndex+n],e=this.$refs[t][0].p.split(",")[0];for(var s=7;s>0;s--)if(!this.map[s][e]){i=s;break}i>0&&o.push([t,e,i])}if(o&&3==o.length){for(var a=0;a<3;a++)this.map[o[a][2]][o[a][1]]=o[a][0],this.map[0][this.sliderIndex+a]="",this.sChange(o[a][0],o[a][1]+","+o[a][2]);this.mapUpdate()}else this.$emit("over",this.totalScore,this.highScore),this.totalScore>this.highScore&&r.setItem("H-SCORE",this.totalScore)},scorePlus:function(t){var e=this;this.totalScore+parseInt(t)>this.highScore&&a.transition(this.$refs.rScore,{styles:{transform:"scale(1.2)",transformOrigin:"100%"},duration:100,timingFunction:"ease-out",delay:0},function(){setTimeout(function(){a.transition(e.$refs.rScore,{styles:{transform:""},duration:100,timingFunction:"ease-in",delay:0},function(){})},100)}),this.totalScore+=parseInt(t)||0},mapUpdate:function(){this.mapCalculator1(this.map)},mapCalculator1:function(){var t=function(t,e,i){t[e]?0!=i&&(0==t[e].score?t[e].score=i:t[e].score++):t[e]={id:e,score:i}};return function(e){for(var i=this,o=!1,n={},s=e.length,r=e[0].length,a=void 0,c=void 0,h=void 0,u=s-1;u>0;u--)for(var f=0;f<r;f++)if((a=e[u][f]||"")&&(0!=f&&f!=r-1||1!=u&&u!=s-1)){c=this.$refs[a][0].p.split(","),h=parseInt(this.$refs[a][0].num);var l=void 0,d=void 0,p=void 0,m=void 0;if(0==f||f==r-1||1==u||u==s-1){if(0==f||f==r-1){if(m=s-1-parseInt(c[1]),!e[m-1][f]||!e[m+1][f])continue;l=this.$refs[e[m-1][f]][0],d=this.$refs[e[m+1][f]][0]}else if(1==u||u==s-1){if(p=parseInt(c[0]),!e[u][p-1]||!e[u][p+1])continue;l=this.$refs[e[u][p-1]][0],d=this.$refs[e[u][p+1]][0]}l&&d&&l.num==h&&d.num==h&&(o=!0,t(n,a,++h),t(n,l.id,0),t(n,d.id,0))}else{var g=[[[0,1],[0,-1]],[[-1,1],[1,-1]],[[-1,0],[1,0]],[[-1,-1],[1,1]]];m=s-1-parseInt(c[1]),p=parseInt(c[0]);for(var v=0,x=g[0];v<g.length;x=g[++v])e[m+x[0][0]][p+x[0][1]]&&e[m+x[1][0]][p+x[1][1]]&&(l=this.$refs[e[m+x[0][0]][p+x[0][1]]][0],d=this.$refs[e[m+x[1][0]][p+x[1][1]]][0],l&&d&&l.num==h&&d.num==h&&(o=!0,t(n,a,h+1),t(n,l.id,0),t(n,d.id,0)))}}o?setTimeout(function(){for(var t in n)i.sChange(t,void 0,n[t].score);setTimeout(function(){i.stonesTrim()},100)},400):(this.$emit("screenUnlock"),setTimeout(function(){i.pushStones()},100))}}(),stonesTrim:function(){for(var t=this,e=!1,i=this.map.length,o=this.map[0].length,n=void 0,s=void 0,r=0,a=0;a<o;a++){r=0;for(var c=i-1;c>0;c--)n=this.map[c][a]||"",n?r>0&&(e=!0,s=parseInt(this.$refs[n][0].p.split(",")[1]),this.sChange(n,{y:r}),this.map[i-1-s+r][a]=n,this.map[c][a]=""):r++}setTimeout(function(){t.mapUpdate()},e?200:0)},sChange:function(t,e,i){var n=this.$refs[t][0].p.split(",");"string"==typeof e&&e.split(",")?this.sMove(t,e.split(",")[0],7-parseInt(e.split(",")[1])):"object"==(void 0===e?"undefined":o(e))&&(!e.x&&(e.x=0),!e.y&&(e.y=0),this.sMove(t,parseInt(n[0])+e.x,parseInt(n[1])-e.y)),i>=0&&this.sUp(t,i),0==i&&(this.map[7-parseInt(n[1])][parseInt(n[0])]="")},sMove:function(t,e,i){this.$refs[t][0].move(e,i)},sUp:function(t,e){this.$refs[t][0].scoreChange(e)},music:function(t){}}}},function(t,e){t.exports={"u-stone":{width:126,height:125,borderBottomWidth:10,borderBottomColor:"rgba(0,0,0,0.2)",lineHeight:125,textAlign:"center",fontSize:80,color:"#666666",backgroundColor:"#ffffff",position:"absolute",left:0,bottom:0,transform:"translate(0px,-875px)"}}},function(t,e){t.exports={"u-score-b":{position:"fixed",width:230,top:90,right:20,display:"flex",flexDirection:"row",flexWrap:"nowrap"},b2:{top:40},"u-score-tlt":{height:40,color:"#ffffff",fontSize:30},"u-score":{height:40,flex:1,fontSize:30,textAlign:"right",color:"#ffffff"},"clr-green":{color:"#3cd917"}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("text",{ref:"stone",staticClass:["u-stone"],style:{color:t.color,visibility:t.visibility,backgroundColor:t.backgroundColor0}},[t._v(t._s(t.score))]):t._e()},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:["u-slider"]},[i("div",{staticClass:["u-score-b","b2"]},[i("text",{staticClass:["u-score-tlt"]},[t._v("HIGH")]),i("text",{staticClass:["u-score"]},[t._v(t._s(t.highScore>t.totalScore?t.highScore:t.totalScore))])]),i("div",{staticClass:["u-score-b"]},[i("text",{staticClass:["u-score-tlt"]},[t._v("SCORE")]),i("text",{ref:"rScore",class:["u-score",t.totalScore>t.highScore?"clr-green":""]},[t._v(t._s(t.totalScore))])]),t._l(t.stones,function(t){return[i("stone",{ref:t.id,refInFor:!0,attrs:{id:t.id,p0:t.p0,num0:t.s}})]})],2)},staticRenderFns:[]},t.exports.render._withStripped=!0}]);