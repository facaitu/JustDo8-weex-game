// { "framework": "Vue"} 

!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=6)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(5),o=function(t){return t&&t.__esModule?t:{default:t}}(n),s=(weex.requireModule("modal"),weex.requireModule("animation"));e.default={components:{stoneMap:o.default},data:{stoneMapShow:!1,infoShow:!1,actionStart:0,actionTo:0,actionSize:0,finalScore:0,highScore:0,allAction:["click","up","down","left","right"]},mounted:function(){var t=this;setTimeout(function(){s.transition(t.$refs.rLogo,{styles:{transform:"translateY(200px) scale(1.4)",opacity:1},duration:800,timingFunction:"ease-out",delay:0},function(){s.transition(t.$refs.rBtnStart,{styles:{opacity:1},duration:1e3,timingFunction:"ease",delay:0},function(e){return t.btnShine()})})},1e3)},methods:{btnShine:function(){var t=this;this.btnClock?this.btnClock++:this.btnClock=1,s.transition(this.$refs.rBtnStart,{styles:{opacity:this.btnClock%2==1?.5:1},duration:800,timingFunction:"linear",delay:0},function(){t.startBtnHide?s.transition(t.$refs.rBtnStart,{styles:{opacity:0},duration:400,timingFunction:"linear",delay:0}):t.btnShine()})},gameStart:function(){var t=this;this.startBtnHide=!0,s.transition(this.$refs.rLogo,{styles:{transform:"translate(-190px,-170px)",opacity:1},duration:1e3,timingFunction:"ease-out",delay:0},function(){t.stoneMapShow=!0})},gameRestart:function(){this.finalScore=this.highScore=0,this.stoneMapShow=!0,this.infoShow=!1,this.ScreenLock=!1},onGameover:function(t,e,i){var n=this;this.finalScore=t,this.highScore=t>e?0:e,this.ScreenLock=!0,this._shineStone=i||"",this.stonesShine(),setTimeout(function(){n.stoneMapShow=!1,n._shineStone="",n.infoShow=!0},3e3)},stonesShine:function(){var t=this;this.stonesShineClock?this.stonesShineClock++:this.stonesShineClock=1,this._shineStone&&s.transition(this._shineStone,{styles:{opacity:this.stonesShineClock%2==1?.2:1},duration:400,timingFunction:"linear",delay:0},function(){return t.stonesShine()})},onClick:function(t){this.actiontp="click",this.actionLaunch("click")},onSwipe:function(t){this.actiontp="swipe:"+t.direction,this.actionLaunch(t.direction)},onPanstart:function(t){this.actionStart=t.changedTouches[0].screenX},onPanend:function(t){this.actionTo=this.actionStart=this.actionSize=0},onHorizontalpan:function(t){0!=this.actionStart&&(this.actionTo=t.changedTouches[0].screenX,this.actionSize=this.actionTo-this.actionStart,this.actionSize>=40?(this.actionStart=this.actionTo,this.actionLaunch("right")):this.actionSize<=-40&&(this.actionStart=this.actionTo,this.actionLaunch("left")))},onScreenLock:function(t){this.ScreenLock=!0},onScreenUnlock:function(t){this.ScreenLock=!1},actionLaunch:function(t){!this.ScreenLock&&-1!=this.allAction.indexOf(t)&&this.$refs.rStoneMap&&this.$refs.rStoneMap.action(t)}}}},function(t,e){t.exports={}},function(t,e){t.exports={wrapper:{backgroundImage:"linear-gradient(to top,#000,#333)",paddingTop:20,display:"flex",flexWrap:"nowrap",flexDirection:"column"},"i-banner":{position:"absolute",top:200,left:175,width:400,height:100,opacity:0},"btn-start":{position:"absolute",color:"#3cd917",fontSize:50,width:300,height:80,left:225,bottom:300,textAlign:"center",lineHeight:80,borderWidth:1,borderColor:"#3cd917",borderRadius:8,backgroundColor:"rgba(0,0,0,0.8)",boxShadow:"0 0 10px #fff",opacity:0},"stone-map":{position:"relative",flex:1},"u-info":{position:"absolute",top:200,height:800,width:750},"info-tlt":{fontSize:70,color:"#ffffff",textAlign:"center"},"info-score":{fontSize:100,marginTop:130,marginBottom:130,color:"#3cd917",textAlign:"center"},"info-high-s":{fontSize:40,marginBottom:30,color:"#fbf00c",textAlign:"center"},"btn-restart":{position:"relative",color:"#3cd917",fontSize:50,width:300,height:80,top:100,left:400,textAlign:"center",lineHeight:80,borderWidth:1,borderColor:"#3cd917",borderRadius:8}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:["wrapper"],on:{swipe:t.onSwipe,click:t.onClick,panstart:t.onPanstart,panend:t.onPanend,horizontalpan:t.onHorizontalpan}},[i("image",{ref:"rLogo",staticClass:["i-banner"],attrs:{resize:"contain",src:"http://doc.zwwill.com/justdo8/img/banner.png"}}),i("text",{ref:"rBtnStart",staticClass:["btn-start"],on:{click:t.gameStart}},[t._v("START")]),t.stoneMapShow?i("stoneMap",{ref:"rStoneMap",staticClass:["stone-map"],on:{screenLock:t.onScreenLock,screenUnlock:t.onScreenUnlock,over:t.onGameover}}):t._e(),t.infoShow?i("div",{staticClass:["u-info"]},[i("text",{staticClass:["info-tlt"]},[t._v(t._s(t.highScore?"FINAL SCORE":"RECORD BREAKING"))]),i("text",{staticClass:["info-score"]},[t._v(t._s(t.finalScore))]),t.highScore?i("text",{staticClass:["info-high-s"]},[t._v("HIGH SCORE: "+t._s(t.highScore))]):t._e(),i("text",{staticClass:["btn-restart"],on:{click:t.gameRestart}},[t._v("RESTART")])]):t._e()],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e,i){var n,o,s=[];s.push(i(9)),n=i(7);var r=i(11);o=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(Object.keys(n).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),o=n=n.default),"function"==typeof o&&(o=o.options),o.__file="/Users/zwwill/workspace/dev/github/justdo8-weex/assets/components/stone.vue",o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-57d5c2b4",o.style=o.style||{},s.forEach(function(t){for(var e in t)o.style[e]=t[e]}),"function"==typeof __register_static_styles__&&__register_static_styles__(o._scopeId,s),t.exports=n},function(t,e,i){var n,o,s=[];s.push(i(10)),n=i(8);var r=i(12);o=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(Object.keys(n).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),o=n=n.default),"function"==typeof o&&(o=o.options),o.__file="/Users/zwwill/workspace/dev/github/justdo8-weex/assets/components/stoneMap.vue",o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-ed3159f4",o.style=o.style||{},s.forEach(function(t){for(var e in t)o.style[e]=t[e]}),"function"==typeof __register_static_styles__&&__register_static_styles__(o._scopeId,s),t.exports=n},function(t,e,i){var n,o,s=[];s.push(i(1)),s.push(i(2)),n=i(0);var r=i(3);o=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(Object.keys(n).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),o=n=n.default),"function"==typeof o&&(o=o.options),o.__file="/Users/zwwill/workspace/dev/github/justdo8-weex/src/index.vue",o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-989a1d56",o.style=o.style||{},s.forEach(function(t){for(var e in t)o.style[e]=t[e]}),"function"==typeof __register_static_styles__&&__register_static_styles__(o._scopeId,s),t.exports=n,t.exports.el="true",new Vue(t.exports)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=weex.requireModule("animation");weex.requireModule("modal");e.default={props:["id","p0","num0"],data:function(){return{show:!0,p:"0,8",visibility:"",num:-1,colors:["#333","#666","#eee","#b9e3ee","#ebe94b","#46cafb","#eca48f","#decb3d","#8d1894"],backgroundColors:["#222","#ddd","#999","#379dc3","#36be0d","#001cc6","#da4324","#56125a","#ffffff"]}},computed:{color:function(){return this.colors[this.num]},score:function(){return this.num<0&&(this.num=this.num0||1),this.num<9&&this.num>0?this.num:0},backgroundColor0:function(){return this.backgroundColors[this.num]}},watch:{p:function(t){var e=125*t.charAt(0)+"px",i=125*t.charAt(2)+"px";n.transition(this.$refs.stone,{styles:{transform:"translate("+e+",-"+i+")"},duration:200,timingFunction:"ease-in",delay:0})}},mounted:function(){this.initState(this.p0)},methods:{move:function(t,e){this.p=t+","+e},scoreChange:function(t){var e=this;t>0?this.num=t:n.transition(this.$refs.stone,{styles:{transform:"translate(625,-1125) scale(0)"},duration:700,timingFunction:"ease-in",delay:0},function(){e.show=!1,e.$parent.scorePlus(Math.pow(4,parseInt(e.num))),e.num=0})},initState:function(t){var e=this;t=t.split(",");var i=125*t[0]+"px",o=125*t[1]+"px";this.num=this.num0,n.transition(this.$refs.stone,{styles:{transform:"translate("+i+",-"+o+")"},duration:10,delay:0},function(){e.visibility="visible"}),this.p=this.p0}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=i(4),s=function(t){return t&&t.__esModule?t:{default:t}}(o),r=weex.requireModule("storage"),a=weex.requireModule("animation"),c=weex.requireModule("modal");e.default={components:{stone:s.default},data:function(){return{MAX_H:9,totalScore:0,highScore:0,stones:[],map:[],sliderIndex:1,actionLock:!0,sNum:0,sounds:{change:"http://doc.zwwill.com/justdo8/res/change.wav"}}},mounted:function(){var t=this;this.map=[],this.stones=[];for(var e=0;e<this.MAX_H;e++)this.map.push(["","","","","",""]);this.pushStones(),r.getItem("H-SCORE",function(e){e&&e.data&&"undefined"!=e.data?t.highScore=parseInt(e.data):t.highScore=0})},methods:{action:function(t){var e=this;if(!this.actionLock)switch(t){case"click":case"up":this.actionChange(),this.actionLock=!0,setTimeout(function(){e.actionLock=!1},200);break;case"left":case"right":this.actionSliderMove(t),this.actionLock=!0,setTimeout(function(){e.actionLock=!1},200);break;case"down":this.actionDown(),this.actionLock=!0;break;default:c.toast({message:"unknown action",duration:.1})}},pushStones:function(){var t,e=[],i=void 0;this.sliderIndex=Math.floor(4*Math.random());for(var n=0;n<3;n++)i="s"+ ++this.sNum+Date.now(),e.push({id:i,p0:this.sliderIndex+n+","+(this.MAX_H-1),s:Math.floor(1.5*Math.random())+1}),this.map[0][this.sliderIndex+n]=i;(t=this.stones).push.apply(t,e),this.actionLock=!1},actionChange:function(){var t=this.map[0][this.sliderIndex],e=this.map[0][this.sliderIndex+1],i=this.map[0][this.sliderIndex+2];this.sChange(t,{x:2}),this.map[0][this.sliderIndex+2]=t,this.sChange(e,{x:-1}),this.map[0][this.sliderIndex]=e,this.sChange(i,{x:-1}),this.map[0][this.sliderIndex+1]=i},actionSliderMove:function(t){if(!(this.sliderIndex<=0&&"left"==t||this.sliderIndex>=3&&"right"==t)){var e=this.map[0][this.sliderIndex],i=this.map[0][this.sliderIndex+1],n=this.map[0][this.sliderIndex+2],o="left"==t?-1:1;this.sChange(e,{x:o}),this.map[0][this.sliderIndex+o]=e,this.sChange(i,{x:o}),this.map[0][this.sliderIndex+o+1]=i,this.sChange(n,{x:o}),this.map[0][this.sliderIndex+o+2]=n,this.map[0][this.sliderIndex+1+-1*o]="",this.sliderIndex+=o}},actionDown:function(){this.$emit("screenLock");for(var t=void 0,e=void 0,i=void 0,n=[],o=this.map.length-1,s=0;s<3;s++){i="",e=this.sliderIndex+s,t=this.map[0][e];for(var r=o;r>0;r--)if(!this.map[r][e]){i=r;break}i>0&&n.push([t,e,i])}if(n&&n.length>0){for(var a=0;a<n.length;a++)this.sChange(n[a][0],n[a][1]+","+n[a][2]),this.map[n[a][2]][n[a][1]]=n[a][0],this.map[0][n[a][1]]="";this.mapUpdate()}},scorePlus:function(t){var e=this;this.totalScore+parseInt(t)>this.highScore&&a.transition(this.$refs.rScore,{styles:{transform:"scale(1.2)",transformOrigin:"100%"},duration:100,timingFunction:"ease-out",delay:0},function(){setTimeout(function(){a.transition(e.$refs.rScore,{styles:{transform:""},duration:100,timingFunction:"ease-in",delay:0},function(){})},100)}),this.totalScore+=parseInt(t)||0},mapUpdate:function(){this.mapCalculator1(this.map)},mapCalculator1:function(){var t=function(t,e,i){t[e]?0!=i&&(0==t[e].score?t[e].score=i:t[e].score++):t[e]={id:e,score:i}};return function(e){for(var i=this,n=!1,o={},s=e.length-1,a=e[0].length-1,c=void 0,h=void 0,u=s;u>=0;u--)for(var l=0;l<=a;l++)if((c=e[u][l]||"")&&(0!=l&&l!=a||0!=u&&u!=s)){h=parseInt(this.$refs[c][0].num);var f=void 0,d=void 0;if(0==l||l==a||0==u||u==s){if(0==l||l==a){if(!e[u-1][l]||!e[u+1][l])continue;f=this.$refs[e[u-1][l]][0],d=this.$refs[e[u+1][l]][0]}else if(0==u||u==s){if(!e[u][l-1]||!e[u][l+1])continue;f=this.$refs[e[u][l-1]][0],d=this.$refs[e[u][l+1]][0]}f&&d&&f.num==h&&d.num==h&&(n=!0,t(o,c,++h),t(o,f.id,0),t(o,d.id,0))}else for(var p,m=[[[0,1],[0,-1]],[[-1,1],[1,-1]],[[-1,0],[1,0]],[[-1,-1],[1,1]]],g=0;g<m.length;g++)p=m[g],e[u+p[0][0]][l+p[0][1]]&&e[u+p[1][0]][l+p[1][1]]&&(f=this.$refs[e[u+p[0][0]][l+p[0][1]]][0],d=this.$refs[e[u+p[1][0]][l+p[1][1]]][0],f&&d&&f.num==h&&d.num==h&&(n=!0,t(o,c,h+1),t(o,f.id,0),t(o,d.id,0)))}if(n)setTimeout(function(){for(var t in o)i.sChange(t,void 0,o[t].score);setTimeout(function(){i.stonesTrim()},100)},400);else{for(var S="",v=0;v<this.map[0].length;v++)if(this.map[0][v]){S=this.$refs[this.map[0][v]][0].$refs.stone;break}S?(this.$emit("over",this.totalScore,this.highScore,S),this.totalScore>this.highScore&&r.setItem("H-SCORE",this.totalScore)):(this.$emit("screenUnlock"),setTimeout(function(){i.pushStones()},100))}}}(),stonesTrim:function(){for(var t=this,e=!1,i=this.map.length-1,n=this.map[0].length-1,o=void 0,s=0,r=0;r<=n;r++){s=0;for(var a=i;a>=0;a--)o=this.map[a][r]||"",o?s>0&&(e=!0,this.sChange(o,{y:s}),this.map[a+s][r]=o,this.map[a][r]=""):s++}setTimeout(function(){t.mapUpdate()},e?200:0)},sChange:function(t,e,i){var o=this.$refs[t][0].p.split(","),s=this.map.length-1;this.map[0].length;"string"==typeof e&&e.split(",")?this.sMove(t,e.split(",")[0],s-parseInt(e.split(",")[1])):"object"==(void 0===e?"undefined":n(e))&&(!e.x&&(e.x=0),!e.y&&(e.y=0),(e.x||e.y)&&this.sMove(t,parseInt(o[0])+e.x,parseInt(o[1])-e.y)),i>=0&&this.sUp(t,i),0==i&&(this.map[s-parseInt(o[1])][parseInt(o[0])]="")},sMove:function(t,e,i){this.$refs[t][0].move(e,i)},sUp:function(t,e){this.$refs[t][0].scoreChange(e)},music:function(t){}}}},function(t,e){t.exports={"u-stone":{width:126,height:125,borderBottomWidth:10,borderBottomColor:"rgba(0,0,0,0.2)",lineHeight:125,textAlign:"center",fontSize:80,color:"#666666",backgroundColor:"#ffffff",position:"absolute",left:0,bottom:0,transform:"translate(0px,-875px)"}}},function(t,e){t.exports={"u-score-b":{position:"fixed",width:230,top:90,right:20,display:"flex",flexDirection:"row",flexWrap:"nowrap"},b2:{top:40},"u-score-tlt":{height:40,color:"#ffffff",fontSize:30},"u-score":{height:40,flex:1,fontSize:30,textAlign:"right",color:"#ffffff"},"clr-green":{color:"#3cd917"}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("text",{ref:"stone",staticClass:["u-stone"],style:{color:t.color,visibility:t.visibility,backgroundColor:t.backgroundColor0}},[t._v(t._s(t.score))]):t._e()},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:["u-slider"]},[i("div",{staticClass:["u-score-b","b2"]},[i("text",{staticClass:["u-score-tlt"]},[t._v("HIGH")]),i("text",{staticClass:["u-score"]},[t._v(t._s(t.highScore>t.totalScore?t.highScore:t.totalScore))])]),i("div",{staticClass:["u-score-b"]},[i("text",{staticClass:["u-score-tlt"]},[t._v("SCORE")]),i("text",{ref:"rScore",class:["u-score",t.totalScore>t.highScore?"clr-green":""]},[t._v(t._s(t.totalScore))])]),t._l(t.stones,function(t){return[i("stone",{ref:t.id,refInFor:!0,attrs:{id:t.id,p0:t.p0,num0:t.s}})]})],2)},staticRenderFns:[]},t.exports.render._withStripped=!0}]);